<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daniel Carrera</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>
    <div class="page-flash"></div>
    <canvas id="constellation-bg"></canvas>
    <canvas id="constellation-fg"></canvas>
    <nav>
        <a href="/" class="nav-name">
            <img src="logo.png" alt="Logo" class="nav-logo">
            Daniel Carrera
        </a>
        <div class="nav-links">
            <a href="/art.html">Art</a>
            <a href="/literature.html">Literature</a>
            <a href="/software.html">Software</a>
        </div>
    </nav>

    <main>
        <section class="hero">
            <model-viewer
                id="hero-model"
                src="timeless-gaze-compressed.glb"
                alt="3D Model"
                loading="eager"
                camera-orbit="0deg 90deg auto"
                camera-target="0m 0.15m 0m"
                interaction-prompt="none"
                disable-zoom
                disable-tap
                disable-pan
                shadow-intensity="0"
                class="hero-model"
            ></model-viewer>
            <h1>Daniel Carrera</h1>
            <p class="hero-subtitle">polymath</p>
        </section>

        <section class="latest-blog">
            <h2>Latest</h2>
            <a href="/literature.html" class="blog-preview-card">
                <time datetime="2026-01-23">January 23, 2026</time>
                <h3>Your First Blog Post</h3>
                <p>This is where your blog post excerpt will appear. Write about anything that interests you.</p>
            </a>
        </section>

        <section class="projects">
            <h2>Software</h2>

            <div class="project-grid">
                <a href="/software.html#tiempo" class="project-card card-tiempo">
                    <img src="icon-tiempo.png" alt="Tiempo" class="project-icon-img">
                    <h3>Tiempo</h3>
                    <p>AI-Daily Planner for iOS and macOS</p>
                </a>

                <a href="/software.html#synesthesia" class="project-card card-synesthesia">
                    <img src="icon-synesthesia.png" alt="Synesthesia" class="project-icon-img">
                    <h3>Synesthesia</h3>
                    <p>VisionOS app for experiencing music visually</p>
                </a>

                <a href="/software.html#arrow" class="project-card card-arrow">
                    <img src="icon-arrow.png" alt="Arrow" class="project-icon-img">
                    <h3>Arrow</h3>
                    <p>VisionOS app for Spatial Messaging</p>
                </a>
            </div>
        </section>

        <section class="featured-media">
            <h2>Art</h2>
            <a href="/art.html" class="media-preview-card">
                <div class="media-preview-placeholder"></div>
                <p class="media-preview-caption">Featured photo or video</p>
            </a>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 Daniel Carrera</p>
    </footer>
    <script src="animation.js"></script>
    <script>
        // Page transition flash effect
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', function(e) {
                if (this.href && !this.href.includes('#')) {
                    e.preventDefault();
                    const flash = document.querySelector('.page-flash');
                    flash.classList.add('active');
                    setTimeout(() => {
                        window.location.href = this.href;
                    }, 150);
                }
            });
        });
    </script>
    <script>
        // Figure-8 infinity motion for 3D model with mouse tracking
        const heroModel = document.getElementById('hero-model');
        if (heroModel) {
            let startTime = null;
            const duration = 20000; // 20 seconds for full infinity loop
            let scrollScale = 1;
            let mouseRotation = 0;
            let mouseTilt = 0;

            // Update scale based on scroll position
            function updateScrollScale() {
                const scrollY = window.scrollY;
                const maxScroll = 400; // Fully scaled at 400px scroll
                scrollScale = 1 + Math.min(scrollY / maxScroll, 1) * 0.5; // 1.0 to 1.5
            }

            // Track mouse position relative to model center
            function updateMousePosition(e) {
                const rect = heroModel.getBoundingClientRect();
                const modelCenterX = rect.left + rect.width / 2;
                const modelCenterY = rect.top + rect.height / 2;

                // Calculate angle from model to cursor
                const deltaX = e.clientX - modelCenterX;
                const deltaY = e.clientY - modelCenterY;

                // Convert to rotation angles (atan2 gives precise angle)
                mouseRotation = Math.atan2(deltaX, 300) * (180 / Math.PI) * -1;
                mouseTilt = Math.atan2(deltaY, 300) * (180 / Math.PI) * -1;
            }

            window.addEventListener('scroll', updateScrollScale, { passive: true });
            window.addEventListener('mousemove', updateMousePosition, { passive: true });
            updateScrollScale(); // Initialize on load

            function animateRotation(timestamp) {
                if (!startTime) startTime = timestamp;
                const elapsed = timestamp - startTime;
                const t = (elapsed / duration) * Math.PI * 2;

                // Base figure-8 animation
                const baseRotation = Math.sin(t) * 25;
                const tiltOffset = Math.sin(t * 2);
                const baseTilt = 80 + tiltOffset * 10;

                // Combine base animation with mouse tracking
                const rotation = baseRotation + mouseRotation;
                const tilt = baseTilt + mouseTilt;

                // Physical movement along figure-8 path
                const moveX = Math.sin(t) * 10;         // ±10px horizontal
                const moveY = Math.sin(t * 2) * 4;      // ±4px vertical (figure-8)

                // Scale: base from scroll + nod effect
                const nodScale = 1 + tiltOffset * 0.15; // 0.85 to 1.15
                const totalScale = nodScale * scrollScale;

                heroModel.setAttribute('camera-orbit', `${rotation}deg ${tilt}deg auto`);
                heroModel.style.transform = `translate(calc(-50% + ${moveX}px), calc(-50% + ${moveY}px)) scale(${totalScale})`;

                requestAnimationFrame(animateRotation);
            }

            requestAnimationFrame(animateRotation);
        }
    </script>
</body>
</html>
